import{r as f,g as p,h as c,i as m}from"./app.8f4ddc6e.js";const y=t=>{for(var d="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=l.length,s=0;s<t;s++)d+=l.charAt(Math.floor(Math.random()*r));return d},h=t=>{try{return t.type.name==="dragable"}catch{return!1}};let u=f(null);const b={name:"dragable",props:{element:{type:String,default:()=>"div"},data:{type:Object,required:!1,default:()=>null},groups:{type:Array,required:!1,default:()=>[]},locked:{type:Boolean,required:!1,default:()=>!1},mode:{type:String,required:!1,default:()=>"move",validator:t=>["copy","move"].includes(t)}},emits:["drag-start","drag-end"],setup(t,d){const l=f(!1),r=m(),s=e=>{l.value=!0;let a={data:t.data,groups:t.groups,mode:t.mode,el:g};u.value=t.data,e.dataTransfer.setData("dragged",JSON.stringify(a))},i=e=>{var a;if(l.value=!1,u.value!=null)try{let n=(a=r==null?void 0:r.parent)==null?void 0:a.exposed;if(!n)return;n.items.value.push(u.value)}finally{u.value=null}},o=p(),g=y(10);return()=>c(t.element,{draggable:!0,class:[l.value?"dragging":""],style:[{cursor:"grab"}],ondragstart:e=>t.locked?e.preventDefault():s(e),ondragend:e=>i(),id:g},o)}},x={name:"dropable",props:{element:{type:String,required:!1,default:()=>"div"},groups:{type:Array,required:!1,default:()=>[]}},setup:(t,d)=>{const l=f(null),r=f([]);d.expose({items:r});const s=e=>{e.preventDefault();let a=JSON.parse(e.dataTransfer.getData("dragged"));if(!(a.groups.length!=0&&t.groups.filter(v=>a.groups.includes(v)).length==0)){var n=document.getElementById(a.el);a.mode=="move"&&l.value.appendChild(n),a.mode=="copy"&&l.value.appendChild(n==null?void 0:n.cloneNode(!0)),r.value.push(u.value),u.value=null}},i=()=>{var e=r.value.findIndex(a=>a.key==u.value.key);e!=-1&&r.value.splice(e,1)},o=p(),g=()=>{if(!o.default)return;let e=o.default();for(let a=0;a<e.length;a++)h(e[a])&&(e[a].props||(e[a].props={}),r.value.push(e[a].props.data));return e};return()=>(r.value.length=0,c(t.element,{ref:l,ondrop:e=>s(e),ondragover:e=>e.preventDefault(),ondragleave:()=>i()},g()))}};export{x as a,b as d};
